<!DOCTYPE html>
<html>

<head>
    <title>Responsive XP Timeplot</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/luxon@3.0.1"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-luxon@1.2.0"></script>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
        }

        .chart-container {
            position: relative;
            width: 100%;
            min-height: 300px;
        }

        @media (min-width: 768px) {
            .chart-container {
                height: 70vh;
                max-height: 700px;
            }
        }
    </style>
</head>

<body>
    <h2>Your XP Progression Over Time</h2>
    <div class="chart-container">
        <canvas id="xpChart"></canvas>
    </div>

    <script>
        // Your properly formatted data
        const xpData = [
            { date: new Date('2024-05-03T15:17:33+01:00'), xp: 5 },
            { date: new Date('2024-05-16T10:51:11+01:00'), xp: 11.125 },
            { date: new Date('2024-05-21T12:20:29+01:00'), xp: 17.25 },
            { date: new Date('2024-05-27T16:31:33+01:00'), xp: 23.375 },
            { date: new Date('2024-07-18T20:03:25+01:00'), xp: 29.5 },
            { date: new Date('2024-07-23T16:30:05+01:00'), xp: 38.7 },
            { date: new Date('2024-08-09T17:58:11+01:00'), xp: 47.9 },
            { date: new Date('2024-08-23T14:25:03+01:00'), xp: 57.1 },
            { date: new Date('2024-08-28T11:02:28+01:00'), xp: 57.15 },
            { date: new Date('2024-08-28T11:17:11+01:00'), xp: 57.25 },
            { date: new Date('2024-08-28T11:29:23+01:00'), xp: 57.4 },
            { date: new Date('2024-08-28T13:31:53+01:00'), xp: 57.6 },
            { date: new Date('2024-08-28T13:44:07+01:00'), xp: 57.85 },
            { date: new Date('2024-09-06T15:53:35+01:00'), xp: 67.05 },
            { date: new Date('2024-09-07T14:12:18+01:00'), xp: 73.175 },
            { date: new Date('2024-09-09T14:11:16+01:00'), xp: 97.675 },
            { date: new Date('2024-09-12T18:48:47+01:00'), xp: 109.925 },
            { date: new Date('2024-09-18T11:38:06+01:00'), xp: 119.925 },
            { date: new Date('2024-09-25T17:58:46+01:00'), xp: 132.175 },
            { date: new Date('2024-09-27T15:53:26+01:00'), xp: 137.175 },
            { date: new Date('2024-09-28T15:58:01+01:00'), xp: 147.175 },
            { date: new Date('2024-12-02T11:27:00+01:00'), xp: 181.55 },
            { date: new Date('2024-12-19T18:18:47+01:00'), xp: 257.8 },
            { date: new Date('2025-01-23T16:57:08+01:00'), xp: 327.8 },
            { date: new Date('2025-02-11T16:58:21+01:00'), xp: 474.8 },
            { date: new Date('2025-02-20T17:06:59+01:00'), xp: 523.8 },
            { date: new Date('2025-02-26T17:23:43Z'), xp: 572.8 },
            { date: new Date('2025-03-21T17:41:45Z'), xp: 676.3 }
        ];

        // Responsive chart configuration
        const createChart = () => {
            const ctx = document.getElementById('xpChart').getContext('2d');

            return new Chart(ctx, {
                type: 'line',
                data: {
                    datasets: [{
                        label: 'XP Earned',
                        data: xpData.map(item => ({
                            x: item.date,
                            y: item.xp
                        })),
                        borderColor: 'rgba(75, 192, 192, 1)',
                        backgroundColor: 'rgba(75, 192, 192, 0.2)',
                        borderWidth: 2,
                        pointRadius: 4,
                        pointHoverRadius: 6,
                        fill: true,
                        tension: 0.1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    plugins: {
                        tooltip: {
                            mode: 'index',
                            intersect: false,
                            callbacks: {
                                label: (context) => {
                                    return `XP: ${context.parsed.y.toFixed(2)}`;
                                }
                            }
                        },
                        legend: {
                            position: 'top',
                        }
                    },
                    scales: {
                        x: {
                            type: 'time',
                            time: {
                                unit: 'month',
                                tooltipFormat: 'DD MMM YYYY',
                                displayFormats: {
                                    month: 'MMM YYYY'
                                }
                            },
                            grid: {
                                display: false
                            },
                            title: {
                                display: true,
                                text: 'Date'
                            }
                        },
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'XP Earned'
                            },
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)'
                            }
                        }
                    },
                    interaction: {
                        mode: 'nearest',
                        axis: 'x',
                        intersect: false
                    }
                }
            });
        };

        // Initialize chart
        const xpChart = createChart();

        // Handle window resize
        window.addEventListener('resize', () => {
            if (xpChart) {
                xpChart.resize();
            }
        });
    </script>
</body>

</html>